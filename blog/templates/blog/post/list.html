{% extends "base.html" %}

{% load blog_tags %}

{% block title %}My Blog - Posts{% endblock %}

{% block content %}

    {% if tag %}
        <h1>Within tag {{ tag.name }}</h1>
    {% endif %}

    <ul class="space-y-3">
        {% for post in posts %}
            <li class="bg-secondary-bg p-2">

                <div class="flex gap-2 items-center mb-2">
                    <div class="w-8 h-8 bg-white rounded-full"></div>
                    <div>
                        <div class="text-small capitalize">{{ post.author }}</div>
                        <div class="text-xsmall text-secondary-text">{{ post.publish|date:"M" }} {{ post.publish.day }}</div>
                    </div>
                </div>
            
                <h2 class="text-medium mb-1 hover:text-white">
                    <a href="{{ post.get_absolute_url }}">
                        {{ post.title }}
                    </a>
                </h2>

                <div>
                    {% for tag in post.tags.all %}
                        <a href="{% url 'blog:get_posts_by_tag' tag.slug %}" class="link-btn">#{{ tag.name }}</a>
                    {% endfor %}
                </div>

                <p>
                    <a href="{% url 'blog:share_post' post.id %}">share</a>
                </p>

            </li>
        {% endfor %}
    </ul>

    {% include "pagination.html" with page=posts %}

{% endblock %}