{% extends "base.html" %}

{% load blog_tags %}

{% block title %}{{ post.title }}{% endblock %}

{% block content %}

    <div class="bg-primary-bg md:rounded-xl">

        <div class="px-16 py-8 pb-0">

            <div class="mb-5">
                {% include "blog/post/includes/post-author.html" %}
            </div>
        
            <h1 class="text-large mb-2">{{ post.title }}</h1>
        
            <div class="-ml-2">
                {% for tag in post.tags.all %}
                    <a href="{% url 'blog:get_posts_by_tag' tag.slug %}" class="link-btn">#{{ tag.name }}</a>
                {% endfor %}
            </div>
    
        </div>
    
        <div class="post-body px-16 py-8">
            {{ post.body|markdown }}
        </div>
    
        {% with comments.count as total_comments %}
            <h2>
                {{ total_comments }} comment{{ total_comments|pluralize }}
            </h2>
        {% endwith %}
    
        {% for comment in comments %}
            <p>
                by {{ comment.name }} on {{ comment.created }}
            </p>
            {{comment.body|linebreaks}}
        {% empty %}
            <p>no comments here.</p>
        {% endfor %}

    </div>

    {% for similar_post in similar_posts %}
        <div>
            <a href="{{ similar_post.get_absolute_url }}">{{ similar_post.title }} {{ similar_post.same_tags }}</a>
        </div>
    {% endfor %}

    {% include "blog/post/includes/comment_form.html" %}
{% endblock %}